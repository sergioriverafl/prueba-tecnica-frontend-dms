<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add record | CRUD API</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body>

    <header class="flex gap-4 items-center justify-between bg-teal-700 px-3 h-16">
        <a href="index.html" class="flex gap-3 items-center">
           

            <svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7 text-white" viewBox="0 0 20 20" fill="currentColor">
                <path d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z" />
              </svg>

            <h1 class="font-bold text-white text-xl">CRUD API</h1>
        </a>
    </header>

    <div class="mx-auto my-5">

        <div class="flex flex-col gap-8">

            <div class="container mx-auto px-3 flex gap-4 items-center justify-between">

                <div class="flex gap-x-2 items-center font-bold text-gray-700">
                    <a href="javascript:history.back()">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7" />
                        </svg>
                    </a>
                    
                    <h1 class="text-xl">Detalles del registro</h1>
                </div>               

            </div>



            <div class="container mx-auto px-3 py-5" id="app">

                <div class="grid grid-cols-1 md:grid-cols-3">


                    <form class="flex flex-col gap-4" autocomplete="none" @submit.prevent="updateRecord">

                        <div class="grid grid-cols-1 gap-4">
    
                            <div class="flex flex-col gap-1">
                                <label for="">Nombres</label>
                                <input type="text" class="w-full text-sm text-black placeholder-gray-500 border border-gray-200 rounded-md py-2 pl-3 focus:outline-none focus:ring-1" v-model="detailsRecord.name">
                            </div>    
                               
                        </div>


                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
    
                            
                            <div class="flex flex-col gap-1">
                                <label for="">Teléfono</label>
                                <input type="text" class="w-full text-sm text-black placeholder-gray-500 border border-gray-200 rounded-md py-2 pl-3 focus:outline-none focus:ring-1" v-model="detailsRecord.phone">
                            </div>
    
                            <div class="flex flex-col gap-1">
                                <label for="">E-mail</label>
                                <input type="text" class="w-full text-sm text-black placeholder-gray-500 border border-gray-200 rounded-md py-2 pl-3 focus:outline-none focus:ring-1" v-model="detailsRecord.email">
                            </div>
    
                        </div>
    
    
    
    
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
    
    
                            <div class="flex flex-col gap-1">
                                <label for="">País</label>
                                <input type="text" class="w-full text-sm text-black placeholder-gray-500 border border-gray-200 rounded-md py-2 pl-3 focus:outline-none focus:ring-1" v-model="detailsRecord.country">
                            </div>
    
                            <div class="flex flex-col gap-1">
                                <label for="">Región</label>
                                <input type="text" class="w-full text-sm text-black placeholder-gray-500 border border-gray-200 rounded-md py-2 pl-3 focus:outline-none focus:ring-1" v-model="detailsRecord.region">
                            </div>
    
                            <div class="flex flex-col gap-1">
                                <label for="">Código postal	</label>
                                <input type="text" class="w-full text-sm text-black placeholder-gray-500 border border-gray-200 rounded-md py-2 pl-3 focus:outline-none focus:ring-1" v-model="detailsRecord.postalZip">
                            </div>   
                                                        
                        </div>


                        <div class="grid grid-cols-1 gap-4">
                            <div class="flex flex-col gap-1">
                                <label for="">Dirección</label>
                                <input type="text" class="w-full text-sm text-black placeholder-gray-500 border border-gray-200 rounded-md py-2 pl-3 focus:outline-none focus:ring-1" v-model="detailsRecord.address">
                            </div>
                        </div>
    
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
    
                            <div class="flex flex-col gap-1">
                                <label for="">Lista</label>
                                <input type="text" class="w-full text-sm text-black placeholder-gray-500 border border-gray-200 rounded-md py-2 pl-3 focus:outline-none focus:ring-1" v-model="detailsRecord.list">
                            </div>
    
                            <div class="flex flex-col gap-1">
                                <label for="">Ranking</label>
                                <input type="text" class="w-full text-sm text-black placeholder-gray-500 border border-gray-200 rounded-md py-2 pl-3 focus:outline-none focus:ring-1" v-model="detailsRecord.numberrange">
                            </div>
    
                            <div class="flex flex-col gap-1">
                                <label for="">Moneda</label>
                                <input type="text" class="w-full text-sm text-black placeholder-gray-500 border border-gray-200 rounded-md py-2 pl-3 focus:outline-none focus:ring-1" v-model="detailsRecord.currency">
                            </div>
                            
                        </div>
    
                        <div class="grid grid-cols-1 gap-4">
    
                            <div class="flex flex-col gap-1">
                                <label for="">Texto</label>
                                <textarea class="w-full text-sm text-black placeholder-gray-500 border border-gray-200 rounded-md py-2 pl-3 focus:outline-none focus:ring-1" v-model="detailsRecord.text"></textarea>

                            </div>
                       
                            
                        </div>

                        <div class="flex gap-3">
                            <button type="submit" class="flex items-center gap-2 px-3 py-1 bg-teal-700 rounded-md text-white font-semibold w-48">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m8-8H4" />
                                </svg>
                                Guardar cambios
                            </button>

                            <button type="button" class="flex items-center gap-2 px-3 py-1 bg-gray-500 rounded-md text-white font-semibold w-54">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                                  </svg>
                                Eliminar registro
                            </button>

                        </div>
    
                        
    
    
    
    
                    </form>



                    <div class="hidden md:flex flex-col col-span-2 items-center justify-center">

                        <img src="./assets/form.svg" alt="" class="h-96">

                    </div>
                </div>

                
            
            </div>

        </div>

       

        </div>

       

    </div>

    <script src="https://unpkg.com/vue@3"></script>
    


<script>

    // const params = window.location.href.split('?')



Vue.createApp({
    data() {
      return {
        idRecord: window.location.search.substring(1),
        detailsRecord: [],
      }
    },
    mounted: function(){
        this.loadData();
  
    },
    methods:{
        loadData(){

            fetch(`https://webapi.dms.ms/api/test/${this.idRecord}`,{
                method: 'GET',
            })
                .then(response => response.json())
                .then((data) => {
                    this.detailsRecord = data;
                    console.table(this.detailsRecord)
                })
        },

        deleteRecord(e){

            fetch(`https://webapi.dms.ms/api/test/${this.idRecord}`,{
                method: 'DELETE',
                body: JSON.stringify( this.detailsRecord), // data can be `string` or {object}!
                headers:{
                    'Content-Type': 'application/json'
                }
            })
            .then(response => response.json())
            .then((data) => {
                console.log(data)
            })
        },


        updateRecord(e){

            fetch(`https://webapi.dms.ms/api/test/${this.idRecord}`,{
                method: 'PUT',
                body: JSON.stringify( this.detailsRecord), // data can be `string` or {object}!
                headers:{
                    'Content-Type': 'application/json'
                }
            })
            .then(response => response.json())
            .then((data) => {
                console.log(data)
            })
        },
    }
  }).mount('#app')
</script>

</body>

</html>